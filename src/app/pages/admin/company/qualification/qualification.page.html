<mat-card class="profile">
    <div class="position">
        <a routerLink="/admin/dashboard" class="link">
            <mat-icon slot="start">home</mat-icon>
            首页</a>
        <span class="divider">/</span>
        <a routerLink="/admin/company/list" class="link" href="javascript:;">我的主体</a>
        <span class="divider">/</span>
        <span>生成报告</span>
    </div>
    <mat-card-header>
        <mat-card-title>生成报告</mat-card-title>
    </mat-card-header>
</mat-card>
<div class="container">
    <form [formGroup]="formGroup" novalidate>
      <ion-grid>
        <ion-row>
          <ion-col size="12">
            <ng-container *ngIf="type === '0'" translate="yes">
              <mat-form-field appearance="outline">
                <mat-label>年份</mat-label>
                <mat-select formControlName="uniqueKey">
                  <mat-option *ngFor="let item of years" [value]="item.value">
                    {{item.label}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </ng-container>
            <ng-container *ngIf="type === '1'" translate="yes">
              <mat-form-field>
                <mat-label>项目名称</mat-label>
                <input matInput formControlName="uniqueKey" placeholder="请输入项目名称" required>
                <mat-error *ngIf="formGroup.get('uniqueKey').hasError('required')">
                  项目名称是 <strong>必填</strong> 项
                </mat-error>
              </mat-form-field>
            </ng-container>
            <ng-container *ngIf="type === '2'" translate="yes">
              <mat-form-field>
                <mat-label>姓名</mat-label>
                <input formControlName="uniqueKey" matInput value="" placeholder="请输入姓名" required>
                <mat-error *ngIf="formGroup.get('uniqueKey').hasError('required')">
                  姓名 <strong>必填</strong> 项
                </mat-error>
              </mat-form-field>
            </ng-container>
          </ion-col>
        </ion-row>
      </ion-grid>
    </form>
    <form *ngIf="form" [formGroup]="form" novalidate>
      <ion-grid>
        <ion-row>
          <ion-col *ngFor="let condition of conditions" size="6">
            <mat-form-field *ngIf="condition.fieldType === '0001'" appearance="outline">
              <mat-label>{{condition.conditionName + (!!condition.required ? '*' : '')}}</mat-label>
              <input style="display: none" [formControlName]="condition.conditionId" matInput>
              <mat-slide-toggle [formControlName]="condition.conditionId"
                                matInput></mat-slide-toggle>
            </mat-form-field>
            <mat-form-field *ngIf="condition.fieldType === '0002'" appearance="outline">
              <mat-label>{{condition.conditionName}}</mat-label>
              <input [formControlName]="condition.conditionId" matInput
                     [placeholder]="'请输入' + condition.conditionName"
                     pattern="(^([-]?)[1-9]([0-9]+)?(\.[0-9]{1,2})?$)|(^([-]?)(0){1}$)|(^([-]?)[0-9]\.[0-9]([0-9])?$)"
                     [maxlength]="12" [required]="!!condition.required">
              <mat-error
                      *ngIf="form.get(condition.conditionId + '').hasError('pattern') && !form.get(condition.conditionId + '').hasError('required')">
                {{condition.conditionName}}必须是 <strong>数字</strong>
              </mat-error>
              <mat-error
                      *ngIf="form.get(condition.conditionId + '').hasError('maxlength') && !form.get(condition.conditionId + '').hasError('required')">
                {{condition.conditionName}}的长度不能大于 <strong>12</strong>
              </mat-error>
              <mat-error *ngIf="form.get(condition.conditionId + '').hasError('required')">
                {{condition.conditionName}}是 <strong>必填</strong> 项
              </mat-error>
            </mat-form-field>
            <mat-form-field *ngIf="condition.fieldType === '0003'" appearance="outline">
              <mat-label>{{condition.conditionName}}</mat-label>
              <input [formControlName]="condition.conditionId" matInput [matDatepicker]="picker"
                     [required]="!!condition.required">
              <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
              <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>
          </ion-col>
          <ion-col size="12">
            <div class="row-buttons">
              <ion-button [disabled]="form.invalid" (click)="submit(true)" mat-raised-button color="primary">
                生成智能快捷匹配报告
              </ion-button>
              <ion-button [disabled]="form.invalid" (click)="submit(false)" mat-raised-button color="primary">
                生成智能精准匹配报告
              </ion-button>
              <ion-button (click)="back()" mat-raised-button color="light">返回</ion-button>
            </div>
          </ion-col>
        </ion-row>
      </ion-grid>
    </form>
</div>
<!--<ion-footer>
    <ion-toolbar>
        <ion-button [disabled]="this.form.invalid" (click)="submit()" expand="full">
            提交
            <ion-ripple-effect></ion-ripple-effect>
        </ion-button>
    </ion-toolbar>
</ion-footer>-->
