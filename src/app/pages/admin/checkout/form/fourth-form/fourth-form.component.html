<mat-step [stepControl]="fourthForm">
    <ng-template matStepLabel>申请信息确认</ng-template>
    <form [formGroup]="fourthForm" style="margin-top: 20px;">
        <h5>商品信息</h5>
        <table *ngIf="source.base" mat-table [dataSource]="source.base"
               style="background: #fafafa;border-radius: 5px">

            <!-- Name Column -->
            <ng-container matColumnDef="name">
                <th mat-header-cell *matHeaderCellDef> 商标名称</th>
                <td mat-cell *matCellDef="let element">
                    <span>{{element.brandName}}</span>
                </td>
            </ng-container>

            <!-- Logo Column -->
            <ng-container matColumnDef="logo">
                <th mat-header-cell *matHeaderCellDef style="width: 250px"> 商标图样</th>
                <td mat-cell *matCellDef="let element">
                    <img *ngIf="element.brandLogoId" style="height: 36px"
                         [src]="FILE_PREFIX_URL + element.brandLogoId">
                </td>
            </ng-container>

            <!-- Price Column -->
            <ng-container matColumnDef="price">
                <th mat-header-cell *matHeaderCellDef style="width: 100px"> 单价</th>
                <td mat-cell *matCellDef="let element">￥{{element.price}}.00</td>
            </ng-container>

            <!-- count Column -->
            <ng-container matColumnDef="count">
                <th mat-header-cell *matHeaderCellDef style="width: 100px"> 数量</th>
                <td mat-cell *matCellDef="let element">{{element.count}}</td>
            </ng-container>

            <!-- Amount Column -->
            <ng-container matColumnDef="amount">
                <th mat-header-cell *matHeaderCellDef style="width: 200px"> 管费总额</th>
                <td mat-cell *matCellDef="let element">￥{{element.amount}}.00</td>
            </ng-container>

            <!-- Total Column -->
            <ng-container matColumnDef="total">
                <th mat-header-cell *matHeaderCellDef style="width: 200px"> 应付总额</th>
                <td mat-cell *matCellDef="let element">￥{{element.total}}.00</td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayed['base']"></tr>
            <tr mat-row *matRowDef="let row; columns: displayed['base'];"
                (click)="selection['base'].toggle(row)">
            </tr>
        </table>

        <ion-grid style="margin-top: 20px;">
            <ion-row>
                <ion-col size="12">
                    <mat-form-field>
                        <mat-label>商标类别</mat-label>
                        <mat-chip-list #typeList>
                            <mat-chip
                                    *ngFor="let item of secondForm.get('brandNames').value.split(',')">
                                {{item}}
                            </mat-chip>
                            <input [matChipInputFor]="typeList" (click)="presentModal()" matInput
                                   required readonly>
                        </mat-chip-list>
                        <!--<mat-error *ngIf="form.get('industryIds').hasError('required')">
                            所属行业是 <strong>必填</strong> 项
                        </mat-error>-->
                    </mat-form-field>
                </ion-col>
            </ion-row>
        </ion-grid>
        <mat-divider></mat-divider>
        <h5>申请人及联系人信息</h5>
        <ion-grid class="company-info">
            <ion-row>
                <ion-col size="4">
                    <p><span>申请人资质：</span>公司</p>
                </ion-col>
                <ion-col size="4">
                    <p><span>公司名称：</span>{{thirdForm.get('companyName').value}}</p>
                </ion-col>
                <ion-col size="4">
                    <p><span>邮政编码：</span>{{thirdForm.get('zipCode').value}}</p>
                </ion-col>
                <ion-col size="4">
                    <p>
                        <span>公司地址：</span>{{thirdForm.get('province').value}}{{thirdForm.get('city').value}}{{thirdForm.get('area').value}}{{thirdForm.get('address').value}}
                    </p>
                </ion-col>
                <ion-col size="4">
                    <p><span>联系人：</span>{{thirdForm.get('name').value}}</p>
                </ion-col>
                <ion-col size="4">
                    <p><span>联系电话：</span>{{thirdForm.get('mobile').value}}</p>
                </ion-col>
                <ion-col size="4">
                    <p><span>电子邮箱：</span>{{thirdForm.get('email').value}}</p>
                </ion-col>
                <ion-col size="4">
                    <p><span>座机号码：</span>{{thirdForm.get('telephone').value}}</p>
                </ion-col>
                <ion-col size="4">
                    <p><span>统一社会信用代码：</span>{{thirdForm.get('creditNumber').value}}</p>
                </ion-col>
            </ion-row>
        </ion-grid>
        <mat-divider></mat-divider>
        <h5>材料信息<span>（可在支付完成后，在订单中上传）</span></h5>
        <ion-grid>
            <ion-row>
                <ion-col size="6">
                    <div class="uploader">
                        <mat-label>营业执照副本复印件</mat-label>
                        <div class="weui-uploader">
                            <div class="weui-uploader__hd">
                                <div class="weui-uploader__info"></div>
                            </div>
                            <div class="weui-uploader__bd">
                                <div class="weui-uploader__input-box"
                                     [ngClass]="{'uploaded' : thirdForm.get('licenseFileId').value}"
                                     [ngStyle]="{'backgroundImage':'url(' + FILE_PREFIX_URL + thirdForm.get('licenseFileId').value + ')'}">
                                </div>
                            </div>
                        </div>
                    </div>
                </ion-col>
                <ion-col size="6">
                    <div class="uploader">
                        <mat-label>委托书</mat-label>
                        <div class="weui-uploader">
                            <div class="weui-uploader__hd">
                                <div class="weui-uploader__info"></div>
                            </div>
                            <div class="weui-uploader__bd">
                                <div class="weui-uploader__input-box"
                                     [ngClass]="{'uploaded' : thirdForm.get('proxyFileId').value}"
                                     [ngStyle]="{'backgroundImage':'url(' + FILE_PREFIX_URL + thirdForm.get('proxyFileId').value + ')'}">
                                </div>
                            </div>
                        </div>
                    </div>
                </ion-col>
                <ion-col size="6">
                    <div class="uploader">
                        <mat-label>优先权证明</mat-label>
                        <div class="weui-uploader">
                            <div class="weui-uploader__hd">
                                <div class="weui-uploader__info"></div>
                            </div>
                            <div class="weui-uploader__bd">
                                <div class="weui-uploader__input-box"
                                     [ngClass]="{'uploaded' : thirdForm.get('priorityFileId').value}"
                                     [ngStyle]="{'backgroundImage':'url(' + FILE_PREFIX_URL + thirdForm.get('priorityFileId').value + ')'}">
                                </div>
                            </div>
                        </div>
                    </div>
                </ion-col>
                <ion-col size="6">
                    <div class="uploader">
                        <mat-label>身份证复印件</mat-label>
                        <div class="weui-uploader">
                            <div class="weui-uploader__hd">
                                <div class="weui-uploader__info"></div>
                            </div>
                            <div class="weui-uploader__bd">
                                <div class="weui-uploader__input-box"
                                     [ngClass]="{'uploaded' : thirdForm.get('cardFileId').value}"
                                     [ngStyle]="{'backgroundImage':'url(' + FILE_PREFIX_URL + thirdForm.get('cardFileId').value + ')'}">
                                </div>
                            </div>
                        </div>
                    </div>
                </ion-col>
            </ion-row>
        </ion-grid>
        <mat-divider></mat-divider>
        <h5>订单备注</h5>
        <ion-grid>
            <ion-row>
                <ion-col size="12">
                    <mat-form-field appearance="outline">
                        <mat-label>备注</mat-label>
                        <textarea matInput formControlName="remark"></textarea>
                    </mat-form-field>
                </ion-col>
            </ion-row>
        </ion-grid>
    </form>
    <div class="step-actions" style="margin-top: 20px;">
        <button mat-raised-button matStepperPrevious>上一步</button>
        <button [disabled]="thirdForm.invalid" (click)="fourth()" mat-raised-button
                color="primary" matStepperNext>下一步
        </button>
    </div>
</mat-step>
