<div class="container">
    <ion-grid>
        <ion-row>
            <ion-col size="12">
                <mat-card>
                    <div class="company">
                        <div class="company_left"></div>
                        <div class="company_right"><p>{{company?.companyName}}</p></div>
                        <img src="/assets/images/dashboard/setting.png" alt="" (click)="to_company()">
                    </div>
                </mat-card>
            </ion-col>
            <ion-col size="4">
                <mat-card>
                    <mat-card-header>
                        <mat-card-title>企业资质
                            <span style="margin-left: 10px" matTooltip="企业本年的自信信息，用于政策与服务匹配" matTooltipPosition="after">
                                <img src="/assets/images/qualification.png" style="width: 20px;height: 20px;">
                            </span>
                        </mat-card-title>
                        <mat-card-subtitle class="link" [routerLink]="['/admin/company/item',company ? company.id : 0]">
                            <img src="/assets/images/dashboard/edit.png">
                        </mat-card-subtitle>
                    </mat-card-header>
                    <mat-card-content>
                        <ion-list>
                            <ion-list-header>信息填写完成度</ion-list-header>

                            <ion-item *ngFor="let item of completions" style="--border-style:none">
                                <span slot="start" class="start">{{item.typeName}}</span>
                                <ion-progress-bar [value]="item.value"
                                                  [color]="item.value | progress"></ion-progress-bar>
                                <span slot="end" class="end">{{item.rate}}%</span>
                            </ion-item>
                        </ion-list>
                    </mat-card-content>
                </mat-card>
            </ion-col>
            <ion-col size="8">
                <mat-card>
                    <mat-card-header>
                        <mat-card-title>匹配政策补贴
                            <span style="margin-left: 10px" matTooltip="根据企业资质匹配政策补贴金额" matTooltipPosition="after">
                                <img src="/assets/images/qualification.png" style="width: 20px;height: 20px;">
                            </span>
                        </mat-card-title>
                        <mat-card-subtitle class="link" (click)="presentLoading()">
                            <img src="/assets/images/dashboard/menu.png">
                        </mat-card-subtitle>
                        <mat-card-content>
                            <div echarts [options]="subsidyOption" class="main-chart"
                                 style="width: 600px;height: 350px;margin-top: 20px"></div>
                        </mat-card-content>
                    </mat-card-header>
                </mat-card>
            </ion-col>
            <ion-col size="12">
                <mat-card>
                    <mat-card-header>
                        <mat-card-title>华海政策库
                            <span style="margin-left: 10px" matTooltip="由中科华海搜集全国范围内的企业相关政策" matTooltipPosition="after">
                                <img src="/assets/images/qualification.png" style="width: 20px;height: 20px;">
                            </span>
                        </mat-card-title>
                        <mat-card-subtitle class="link" (click)="presentLoading()">
                            <img src="/assets/images/dashboard/menu.png">
                        </mat-card-subtitle>
                    </mat-card-header>
                    <mat-card-content>
                        <form [formGroup]="form">
                            <ion-grid>
                                <ion-row>
                                    <ion-col size="2" style="margin-right: 10px">
                                        <mat-form-field appearance="outline">
                                            <mat-select formControlName="province" placeholder="省" required>
                                                <mat-option *ngFor="let item of provinces" [value]="item.name">
                                                    {{item.name}}
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </ion-col>
                                    <ion-col size="2" style="margin-right: 10px">
                                        <mat-form-field appearance="outline">
                                            <mat-select formControlName="city" placeholder="市" required>
                                                <mat-option *ngFor="let item of cities" [value]="item.name">
                                                    {{item.name}}
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </ion-col>
                                    <ion-col size="2">
                                        <mat-form-field appearance="outline">
                                            <mat-select formControlName="area" placeholder="区" required>
                                                <mat-option *ngFor="let item of districts" [value]="item.name">
                                                    {{item.name}}
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </ion-col>
                                </ion-row>
                            </ion-grid>
                        </form>



                                    <div class="hot">
                                        <div class="hot_left">
                                            <p style="text-align: center;font-size: 32px;color: #fff;font-weight: bold">{{policy.total}}</p>
                                            <p style="text-align: center;color: #fff;margin-top: -20px">华海政策库已收录政策</p>
                                        </div>
                                        <ion-grid>
                                        <ion-row>
                                            <ion-col size="4" *ngFor="let item of policy.list.slice(0,3)">
                                                <div class="hot_right">
                                                    <!--<div class="hot_img">
                                                        <img src="/assets/images/dashboard/hot.png">
                                                    </div>-->
                                                    <p style="color: #21333F;font-weight: bold;font-size: 20px;margin-top: 30px;overflow: hidden;text-overflow: ellipsis;white-space: nowrap">
                                                        {{item.policyName}}</p>
                                                    <p style="color:#B5C4D0;font-weight: 400;font-size: 14px;margin-top: -10px;">
                                                        预计补贴金额<span
                                                            style="font-weight: 700;color: #2C9EF7;">{{item.subsidyAmtEnd}}</span>万元
                                                    </p>
                                                    <p style="color:#B5C4D0;font-weight: 400;font-size: 14px;margin-top: -10px;">
                                                        预计所需时间<span
                                                            style="font-weight: 700;color: #2C9EF7;">{{item.reportTiming}}</span>个月
                                                    </p>
                                                </div>
                                            </ion-col>
                                        </ion-row>
                                        </ion-grid>
                                    </div>



                                    <div class="hot">
                                        <div class="hot_left" style="background-color: rgba(13, 215, 141, 1);">
                                            <p style="text-align: center;font-size: 32px;color: #fff;font-weight: bold">{{policy.update}}</p>
                                            <p style="text-align: center;color: #fff;margin-top: -25px">今天更新政策</p>
                                            <p style="text-align: center;color: #fff;margin-top: -13px">{{dateTime | date : 'yyyy-MM-dd HH:mm'}}</p>
                                        </div>
                                        <ion-grid>
                                        <ion-row>
                                            <ion-col size="4" *ngFor="let item of policy.list.slice(3,6)">
                                                <div class="hot_right">
                                                    <!--<div class="hot_img">
                                                        <img src="/assets/images/dashboard/new.png">
                                                    </div>-->
                                                    <p style="color: #21333F;font-weight: bold;font-size: 20px;margin-top: 30px;overflow: hidden;text-overflow: ellipsis;white-space: nowrap">
                                                        {{item.policyName}}</p>
                                                    <p style="color:#B5C4D0;font-weight: 400;font-size: 14px;margin-top: -10px;">预计补贴金额<span
                                                            style="font-weight: 700;color: #2C9EF7;">{{item.subsidyAmtEnd}}</span>万元</p>
                                                    <p style="color:#B5C4D0;font-weight: 400;font-size: 14px;margin-top: -10px;">预计所需时间<span
                                                            style="font-weight: 700;color: #2C9EF7;">{{item.reportTiming}}</span>个月</p>
                                                </div>
                                            </ion-col>
                                        </ion-row>
                                        </ion-grid>
                                    </div>


                        <!--<div class="hot">
                            <div class="hot_left" style="background-color: rgba(13, 215, 141, 1);">
                                <p style="text-align: center;font-size: 32px;color: #fff;font-weight: bold">{{policy.update}}</p>
                                <p style="text-align: center;color: #fff;margin-top: -25px">今天更新政策</p>
                                <p style="text-align: center;color: #fff;margin-top: -13px">{{dateTime | date : 'yyyy-MM-dd HH:mm'}}</p>
                            </div>
                            <div *ngFor="let item of policy.list.slice(3,6)" class="hot_right">
                                <div class="hot_img">
                                    <img src="/assets/images/dashboard/new.png">
                                </div>
                                <p style="color: #21333F;font-weight: bold;font-size: 20px;margin-top: 30px;overflow: hidden;text-overflow: ellipsis;white-space: nowrap">
                                    {{item.policyName}}</p>
                                <p style="color:#B5C4D0;font-weight: 400;font-size: 14px;margin-top: -10px;">预计补贴金额<span
                                        style="font-weight: 700;color: #2C9EF7;">{{item.subsidyAmtEnd}}</span>万元</p>
                                <p style="color:#B5C4D0;font-weight: 400;font-size: 14px;margin-top: -10px;">预计所需时间<span
                                        style="font-weight: 700;color: #2C9EF7;">{{item.reportTiming}}</span>个月</p>
                            </div>
                        </div>-->
                    </mat-card-content>
                </mat-card>
            </ion-col>
            <ion-col size="4">
                <mat-card>
                    <mat-card-header>
                        <mat-card-title>知产保障</mat-card-title>
                    </mat-card-header>
                    <mat-card-content>
                        <ion-list>
                            <ion-item style="--border-style:none">
                                <img src="/assets/images/dashboard/box.png" slot="start"
                                     style="width: 30px;height: 30px">
                                <span>知产保险箱
                                <!--<img src="/assets/images/qualification.png" style="width: 20px;height: 20px;" matTooltip="由中科华海搜集全国范围内的企业相关政策" matTooltipPosition="after">-->
                            </span>
                                <img src="/assets/images/dashboard/to.png" slot="end"
                                     style="width: 25px;height: 25px;cursor: pointer" (click)="toBox()">
                            </ion-item>

                            <ion-item style="--border-style:none">
                                <img src="/assets/images/dashboard/brand.png" slot="start"
                                     style="width: 30px;height: 30px">
                                <span>商标自动续展</span>
                                <ion-toggle (click)="presentLoading('one')" [(ngModel)]="guarantee.one" color="primary"
                                            slot="end"></ion-toggle>
                            </ion-item>

                            <ion-item style="--border-style:none">
                                <img src="/assets/images/dashboard/p.png" slot="start" style="width: 30px;height: 30px">
                                <span>专利智能续费</span>
                                <ion-toggle (click)="presentLoading('two')" [(ngModel)]="guarantee.two" color="primary"
                                            slot="end"></ion-toggle>
                            </ion-item>

                            <ion-item style="--border-style:none">
                                <img src="/assets/images/dashboard/copyright.png" slot="start"
                                     style="width: 30px;height: 30px">
                                <span>版权顾问</span>
                                <ion-toggle (click)="presentLoading('three')" [(ngModel)]="guarantee.three"
                                            color="primary" slot="end"></ion-toggle>
                            </ion-item>
                        </ion-list>
                    </mat-card-content>
                </mat-card>
            </ion-col>
            <ion-col size="8">
                <mat-card>
                    <mat-card-header>
                        <mat-card-title>知产智能服务</mat-card-title>
                    </mat-card-header>
                    <mat-card-content>
                        <ion-row class="service" style="margin: 44px auto;">
                            <ion-col size="4">
                                <ion-tab-button (click)="toCheckout()">
                                    <img src="/assets/images/dashboard/rocket.png">
                                    <ion-label>商标自助智能注册</ion-label>
                                </ion-tab-button>
                            </ion-col>

                            <ion-col size="4">
                                <ion-tab-button (click)="presentLoading()">
                                    <img src="/assets/images/dashboard/plane.png">
                                    <ion-label>专利快捷提交</ion-label>
                                </ion-tab-button>
                            </ion-col>

                            <ion-col size="4">
                                <ion-tab-button (click)="presentLoading()">
                                    <img src="/assets/images/dashboard/e.png">
                                    <ion-label>版权智能存证登记</ion-label>
                                </ion-tab-button>
                            </ion-col>
                        </ion-row>
                    </mat-card-content>
                </mat-card>
            </ion-col>
            <ion-col size="12">
                <mat-card>
                    <mat-card-header>
                        <mat-card-title>我的工单</mat-card-title>
                        <mat-card-subtitle class="link">
                            <img routerLink="/admin/ticket/list" src="/assets/images/dashboard/menu.png">
                        </mat-card-subtitle>
                    </mat-card-header>
                    <mat-card-content>
                        <ion-row>
                            <ion-col size="4">
                                <ion-list class="my_work">
                                    <ion-list-header>工单统计</ion-list-header>
                                    <ion-item style="margin-top: 0" lines="none">
                                        <div class="work">
                                            <div class="work_left">
                                                <img src="/assets/images/dashboard/clock.png">
                                            </div>
                                            <div class="work_right">
                                                <span>{{ticket.ing}}</span>
                                                <p>进行中工单</p>
                                            </div>
                                        </div>
                                    </ion-item>

                                    <ion-item lines="none">
                                        <div class="work">
                                            <div class="work_left" style="background-color: rgba(254, 174, 77, 1)">
                                                <img src="/assets/images/dashboard/alarm.png">
                                            </div>
                                            <div class="work_right" style="background-color:rgba(255, 102, 51, 1)">
                                                <span>{{ticket.error}}</span>
                                                <p>异常工单</p>
                                                <img src="/assets/images/dashboard/to_work.png"
                                                     style="position: absolute;width: 20px;height: 20px;top: 20px;right: 30px">
                                            </div>
                                        </div>
                                    </ion-item>

                                    <ion-item lines="none">
                                        <div class="work">
                                            <div class="work_left" style="background-color: rgba(13, 215, 141, 1)">
                                                <img src="/assets/images/dashboard/check.png">
                                            </div>
                                            <div class="work_right" style="background-color: rgba(51, 153, 153, 1)">
                                                <span>{{ticket.end}}</span>
                                                <p>已完成工单(近3月)</p>
                                            </div>
                                        </div>
                                    </ion-item>
                                </ion-list>
                            </ion-col>
                            <ion-col size="8">
                                <ion-list>
                                    <ion-list-header>关注工单</ion-list-header>
                                    <app-empty *ngIf="ticket.dataSource?.data.length < 1" title="暂时没有相关数据"></app-empty>
                                    <table *ngIf="ticket.dataSource?.data.length > 0" mat-table [dataSource]="ticket.dataSource">

                                        <!-- Position Column -->
                                        <ng-container matColumnDef="content">
                                            <th mat-header-cell *matHeaderCellDef
                                                style="width: 200px;text-align: left;height: 60px"><b>工单内容</b></th>
                                            <td mat-cell *matCellDef="let element"
                                                style="text-align: left;border-bottom-width: 1px !important;"> {{element.serviceName}} </td>
                                        </ng-container>

                                        <!-- Name Column -->
                                        <ng-container matColumnDef="status">
                                            <th mat-header-cell *matHeaderCellDef style="width: 120px"><b>流程节点</b></th>
                                            <td mat-cell *matCellDef="let element"
                                                style="border-bottom-width: 1px !important;height: 50px">
                                                {{element.workSatusName}}
                                            </td>
                                        </ng-container>

                                        <!-- Weight Column -->
                                        <ng-container matColumnDef="progress">
                                            <th mat-header-cell *matHeaderCellDef><b>进度</b></th>
                                            <td mat-cell *matCellDef="let element"
                                                style="border-bottom-width: 1px !important;height: 50px">
                                                <div style="display: flex;align-items: center;padding: 0 20px">
                                                    <ion-progress-bar [value]="element.workSatusRate / 100"
                                                                      [color]="element.workSatusRate / 100 | progress"></ion-progress-bar>
                                                    <span style="margin-left: 10px">{{element.workSatusRate}}%</span>
                                                </div>
                                            </td>
                                        </ng-container>

                                        <!-- Symbol Column -->
                                        <ng-container matColumnDef="actions">
                                            <th mat-header-cell *matHeaderCellDef style="width: 120px"><b>操作</b></th>
                                            <td mat-cell *matCellDef="let element"
                                                style="border-bottom-width: 1px !important;height: 50px">
                                                <a class="actions-icon"
                                                   [routerLink]="['/admin/ticket/item',element.id]">
                                                    <img src="/assets/images/view.png">
                                                </a>
                                            </td>
                                        </ng-container>

                                        <tr mat-header-row *matHeaderRowDef="ticket.displayedColumns"></tr>
                                        <tr mat-row *matRowDef="let row; columns: ticket.displayedColumns;">
                                        </tr>
                                    </table>
                                </ion-list>
                            </ion-col>
                        </ion-row>

                    </mat-card-content>
                </mat-card>
            </ion-col>
            <ion-col size="12">
                <mat-card>
                    <mat-card-header>
                        <mat-card-title>知识产权</mat-card-title>
                    </mat-card-header>
                    <mat-card-content>
                        <ion-row>
                            <ion-col size="4">
                                <div class="brand">
                                    <img src="/assets/images/dashboard/right_r.png">
                                    <div class="brand_list">
                                        <p class="brand_num">{{brandOption.count}}</p>
                                        <p class="brand_name">商标</p>
                                    </div>
                                </div>
                                <ion-grid>
                                    <ion-row>
                                        <ion-col size="6">
                                            <div *ngIf="brandOption.pie" echarts [options]="brandOption.pie"
                                                 style="width: 200px;height: 300px" class="main-chart"></div>
                                        </ion-col>
                                        <ion-col size="6">
                                            <div *ngIf="brandOption.line" echarts [options]="brandOption.line"
                                                 style="width: 200px;height: 300px" class="main-chart"></div>
                                        </ion-col>
                                    </ion-row>
                                </ion-grid>
                            </ion-col>
                            <ion-col size="4">
                                <div class="brand">
                                    <img src="/assets/images/dashboard/right_p.png">
                                    <div class="brand_list">
                                        <p class="brand_num">{{patentOption.count}}</p>
                                        <p class="brand_name">专利</p>
                                    </div>
                                </div>
                                <ion-grid>
                                    <ion-row>
                                        <ion-col size="6">
                                            <div *ngIf="patentOption.pie" echarts [options]="patentOption.pie"
                                                 style="width: 200px;height: 300px" class="main-chart"></div>
                                        </ion-col>
                                        <ion-col size="6">
                                            <div *ngIf="patentOption.line" echarts [options]="patentOption.line"
                                                 style="width: 200px;height: 300px" class="main-chart"></div>
                                        </ion-col>
                                    </ion-row>
                                </ion-grid>
                            </ion-col>
                            <ion-col size="4">
                                <div class="brand">
                                    <img src="/assets/images/dashboard/right_brand.png">
                                    <div class="brand_list">
                                        <p class="brand_num">{{copyOption.count}}</p>
                                        <p class="brand_name">版权</p>
                                    </div>
                                </div>
                                <ion-grid>
                                    <ion-row>
                                        <ion-col size="6">
                                            <div *ngIf="copyOption.pie" echarts [options]="copyOption.pie"
                                                 style="width: 200px;height: 300px" class="main-chart"></div>
                                        </ion-col>
                                        <ion-col size="6">
                                            <div *ngIf="copyOption.line" echarts [options]="copyOption.line"
                                                 style="width: 200px;height: 300px" class="main-chart"></div>
                                        </ion-col>
                                    </ion-row>
                                </ion-grid>
                            </ion-col>
                        </ion-row>
                    </mat-card-content>
                </mat-card>
            </ion-col>
            <ion-col size="12">
                <mat-card>
                    <mat-card-header>
                        <mat-card-title>竞争对手监控</mat-card-title>
                        <mat-card-subtitle class="link">
                            <img routerLink="/admin/monitor/list" src="/assets/images/dashboard/setting.png">
                        </mat-card-subtitle>
                    </mat-card-header>
                    <mat-card-content>
                        <table *ngIf="monitorDataSource" mat-table [dataSource]="monitorDataSource">

                            <!-- Name Column -->
                            <ng-container matColumnDef="name">
                                <th mat-header-cell *matHeaderCellDef><b>目标企业</b></th>
                                <td mat-cell *matCellDef="let element">
                                    {{element.companyName}}
                                </td>
                            </ng-container>

                            <!-- Weight Column -->
                            <ng-container matColumnDef="time">
                                <th mat-header-cell *matHeaderCellDef style="width: 200px"><b>添加时间</b></th>
                                <td mat-cell *matCellDef="let element">
                                    {{element.createTime | date : 'yyyy-MM-dd HH:mm:ss'}}
                                </td>
                            </ng-container>

                            <!-- Symbol Column -->
                            <ng-container matColumnDef="actions">
                                <th mat-header-cell *matHeaderCellDef style="width: 250px"><b>状态</b></th>
                                <td mat-cell *matCellDef="let element">
                                    <div class="monitor">
                                        <span style="margin-right: 10px;">监控中</span>
                                        <span class="circles">
                                            <img src="/assets/images/circle.png">
                                        </span>
                                    </div>
                                </td>
                            </ng-container>

                            <tr mat-header-row *matHeaderRowDef="monitorDisplayedColumns"></tr>
                            <tr mat-row *matRowDef="let row; columns: monitorDisplayedColumns;"></tr>
                        </table>
                    </mat-card-content>
                </mat-card>
            </ion-col>
        </ion-row>
    </ion-grid>
</div>
